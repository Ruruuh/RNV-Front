import{_ as B,d as A,g as F,s as P,h,u as j,n as z,r as D,o as l,c as w,a as t,j as T,k as H,i as U,v as q,F as G,C as L,p as J,e as K,y as Q,x as W}from"./index.1b6326c0.js";import{s as X}from"./search.53f686f2.js";import{n as g}from"./nprogress.af06dfa6.js";const k=c=>(J("data-v-c1833818"),c=c(),K(),c),Y={class:"overview"},Z={class:"overview__header"},$={key:0,class:"overview__title"},ee={key:1,class:"overview__title"},te=["onSubmit"],re={class:"overview__wrapper"},ie=k(()=>t("div",{class:"overview__divider"},null,-1)),oe={class:"overview__tickets"},ae={class:"overview__table"},se=k(()=>t("div",{class:"overview__column-headers"},[t("div",null,"Row #"),t("div",null,"CRF #"),t("div",null,"Date Filed"),t("div",null,"Status"),t("div",null,"Progress"),t("div",null,"Action")],-1)),ne=A({__name:"OverviewView",props:["overviewType"],setup(c){const a=c,f=F(),{userId:d,role:v,department:x,token:S}=P(f),o=h(null),u=h(""),y=h(null),C=j();function p(){var r;let i=1;(r=o.value)==null||r.forEach(s=>{s.rowNumber=i,i+=1})}function E(){var n;let i="";(n=o.value)==null||n.forEach(m=>{i+=m.crf.toString()});const r=u.value,s=X(r,i);let e=0;if(s===-1?e=-1:e=s/r.length,e!==-1)o.value&&(y.value=o.value,o.value=[o.value[e]],p());else return}function I(){u.value="",o.value=y.value,p()}function M(i){C.push("/ticket/"+i.toString())}async function _(i,r,s){g.start();const e="/api/tickets/"+i+"/"+r+"/"+s,n=await Q(e,S.value),m=[],N=["MA","CS","IT","CpE","ME","CE","EE","MPS","HSC"],R=["Multimedia Arts","Computer Science","Information Technology","Computer Engineering","Mechanical Engineering","Civil Engineering","Electronics and Electrical Engineering","Mathematics and Physical Sciences","Humanities, Social Sciences, and Communication"],V=N.indexOf(x.value),O=R[V];i==="director"?(n.forEach(b=>{b.department===O&&m.push(b)}),g.done(),o.value=m,p()):(g.done(),o.value=n,p())}return z(()=>{a.overviewType==="pending"?v.value==="user"?_(v.value,d.value,a.overviewType):(_(v.value,d.value,a.overviewType),f.updateOverview("pending")):a.overviewType==="completed"&&(v.value==="user"?_(v.value,d.value,a.overviewType):(_(v.value,d.value,a.overviewType),f.updateOverview("completed")))}),(i,r)=>{const s=D("base-row");return l(),w("section",Y,[t("div",Z,[a.overviewType==="pending"?(l(),w("div",$,"Pending Tickets")):T("",!0),a.overviewType==="completed"?(l(),w("div",ee,"Completed Tickets")):T("",!0),t("form",{onSubmit:H(E,["prevent"])},[t("div",re,[U(t("input",{type:"text",placeholder:"Search","onUpdate:modelValue":r[0]||(r[0]=e=>u.value=e)},null,512),[[q,u.value]]),t("div",{onClick:I,class:"overview__clear"})])],40,te)]),ie,t("div",oe,[t("div",ae,[se,(l(!0),w(G,null,L(o.value,e=>(l(),W(s,{onViewRow:r[1]||(r[1]=n=>M(n)),class:"overview__row",key:e.rowNumber,id:e.id,rowNumber:e.rowNumber,crf:e.crf,date:e.createdAt.toString().slice(0,10),status:e.status,mode:"overview"},null,8,["id","rowNumber","crf","date","status"]))),128))])])])}}});var de=B(ne,[["__scopeId","data-v-c1833818"]]);export{de as default};
