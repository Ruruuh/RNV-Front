import{_ as z,d as U,h as m,g as q,s as N,m as C,n as O,r as T,o as c,c as p,q as y,a as e,i as G,v as W,k as J,t as _,b as K,j as M,x as B,w as L,T as Q,p as X,e as Y,f as s,y as Z}from"./index.1b6326c0.js";import{s as $}from"./search.53f686f2.js";import{n as b}from"./nprogress.af06dfa6.js";const t=u=>(X("data-v-5c77735e"),u=u(),Y(),u),ee={class:"home"},te=t(()=>e("div",{class:"home__header"},"Welcome.",-1)),oe=t(()=>e("div",{class:"home__subheader"},"Here's what you can do.",-1)),ie={key:0,class:"home__copy"},se=t(()=>e("div",null,[e("strong",null,"Pending tickets"),s(" - See a list of all your remaining tickets as well as its current status.")],-1)),ne=t(()=>e("div",null,[e("strong",null,"Completed tickets"),s(" - See a list of all the tickets that had been approved/rejected.")],-1)),ae=t(()=>e("div",null,[e("strong",null,"Create ticket"),s(" - Create a ticket to be reviewed by the Director, HSU, HR, SDAS, and Finance.")],-1)),le=s("Using the system means that you agree to our policies and guidelines. Click "),re=s(" to review."),ce={key:1,class:"home__copy"},de=["onSubmit"],ue={class:"home__search"},he={key:0,class:"home__ticket"},me={class:"ticket__header"},pe=t(()=>e("div",null,[e("strong",null,"Pending tickets"),s(" - See a list of all the tickets that need your action.")],-1)),_e=t(()=>e("div",null,[e("strong",null,"Completed tickets"),s(" - See a list of all the tickets that had moved forward.")],-1)),ve=t(()=>e("div",null,[e("strong",null,"Forecast"),s(" - Get a view of the expected count of requests throughout the year.")],-1)),fe=s("For a refresher on our policies and guidelines, please click "),ge=s("."),ye=t(()=>e("div",{class:"modal__title"},"Policies and Guidelines",-1)),be=t(()=>e("div",null,"1. Medicines shall be prescribed by a Health Services Unit (HSU) Physician. For medicines prescribed by other physicians, the medical prescription shall be submitted to the HSU physician for proper validation and entry in the medical referral form.",-1)),ke=t(()=>e("div",null,"2. Maintenance medicines shall be prescribed for 30 days.",-1)),Se=t(()=>e("div",null,"3. Vitamins may be prescribed if required as a care for a diagnosed illness, quantity should be good for 30 days.",-1)),xe=t(()=>e("div",null,"4. Immunizations may be availed through the medicine allowance provided that the amount of the immunization package is covered by the medicine allowance.",-1)),we=t(()=>e("div",null,"5. This benefit shall not cover medicines for the following:",-1)),Ce=t(()=>e("div",{class:"modal__subcopy"},[e("div",null,"a. Injury due to insanity or self-infliction;"),e("div",null,"b. Drug addiction or alcoholism;"),e("div",null,"c. Injury sustained in bars, gambling houses or disreputable places or in participating in the commission of a crime; "),e("div",null,"d. Sexually transmitted diseases;"),e("div",null,"e. Functional disorder of the mind;"),e("div",null,"f. Prosthetic work and appliances needed for the procedures such as brace, metal implants and the amount of the stents;"),e("div",null,"g. Cosmetic purposes including dermatological for purposes not intended for curative purposes;"),e("div",null,"h. All other cases of similar nature ")],-1)),Te=t(()=>e("div",null,"6. Reimbursements for medicines during confinement should be covered by an approved Medicine Referral Form (MRF) and the claim should be covered by official statement of expenses and official receipt.",-1)),Me=t(()=>e("div",null,"7. All MRFs shall be subject to approval of the SDAS.",-1)),Be=t(()=>e("div",null,"8. Medicine reimbursements should be covered by an official receipt and prescription. Procedures for reimbursements shall follow our procedure in requesting for Petty Cash/Check Requests. Official receipts shall be recommended for payment by the SDAS.",-1)),Ie=t(()=>e("div",null,"9. The services provided and the medicines prescribed shall be for the treatment of a diagnosed illness or injury and for the benefit solely of the associate.",-1)),Ee=U({__name:"HomeView",setup(u){const o=m(null),d=m(null),h=m(""),v=m(!1),I=q(),{role:k,department:E,token:A}=N(I),S=["director","hsu","hr","sdas","finance","none"],x=["Director","HSU","HR","SDAS","Finance"],H=C(()=>{if(o.value){const i=S.indexOf(o.value.actionBy)-1;return i!==-1?x[i]:"No one yet."}}),R=C(()=>{if(o.value){const n=S.indexOf(o.value.actionBy);return n!==5?x[n]:o.value.status==="Rejected"?"No one. Ticket is rejected.":"No one. Ticket is approved by all."}});function f(){v.value=!v.value}function D(){f()}function F(){var r;let n="";(r=d.value)==null||r.forEach(g=>{n+=g.crf.toString()});const i=h.value,l=$(i,n);let a=0;if(l===-1?a=-1:a=l/i.length,a!==-1)d.value&&(o.value=d.value[a]);else return}function j(){o.value=null,h.value=""}async function P(){b.start();const n="/api/tickets",i=[],l=await Z(n,A.value);if(k.value==="director"){const a=["MA","CS","IT","CpE","ME","CE","EE","MPS","HSC"],r=["Multimedia Arts","Computer Science","Information Technology","Computer Engineering","Mechanical Engineering","Civil Engineering","Electronics and Electrical Engineering","Mathematics and Physical Sciences","Humanities, Social Sciences, and Communication"],g=a.indexOf(E.value),V=r[g];l.forEach(w=>{w.department===V&&i.push(w)}),b.done(),d.value=i}else b.done(),d.value=l}return O(()=>{P()}),(n,i)=>{const l=T("base-progress"),a=T("base-modal");return c(),p("section",ee,[te,oe,y(k)==="user"?(c(),p("div",ie,[se,ne,ae,e("div",null,[le,e("strong",null,[e("a",{class:"home__policy",onClick:f},"here")]),re])])):(c(),p("div",ce,[e("form",{onSubmit:J(F,["prevent"])},[e("div",ue,[G(e("input",{type:"text",placeholder:"Search for a ticket.","onUpdate:modelValue":i[0]||(i[0]=r=>h.value=r)},null,512),[[W,h.value]]),e("div",{onClick:j,class:"home__clear"})])],40,de),o.value?(c(),p("div",he,[e("div",me,"Ticket #"+_(o.value.crf),1),e("div",null,"Date Filed: "+_(o.value.createdAt.toString().substring(0,10)),1),e("div",null,"Approved By: "+_(y(H)),1),e("div",null,"To Approve: "+_(y(R)),1),K(l,{actionBy:o.value.actionBy},null,8,["actionBy"])])):M("",!0),pe,_e,ve,e("div",null,[fe,e("strong",null,[e("a",{class:"home__policy",onClick:f},"here")]),ge])])),(c(),B(Q,{to:"#app"},[v.value?(c(),B(a,{key:0,class:"modal"},{default:L(()=>[e("div",{class:"modal__content"},[e("div",{class:"modal__header"},[ye,e("div",{onClick:D,class:"modal__close"})]),be,ke,Se,xe,we,Ce,Te,Me,Be,Ie])]),_:1})):M("",!0)]))])}}});var De=z(Ee,[["__scopeId","data-v-5c77735e"]]);export{De as default};
